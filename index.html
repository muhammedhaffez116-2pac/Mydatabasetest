<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±ÙŠØ¨ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø¹Ø±Ø¨ÙŠ - Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØ¯</title>
    <style>
        body {font-family: Arial, sans-serif; margin: 0; background: #fff;}
        .main-header {background: #111; color: #fff; text-align: center; padding: 15px;}
        .main-title { font-size: 24px; font-weight: bold; margin-bottom: 5px;}
        .sub-title { font-size: 14px; color: #ccc;}
        .contact-info { font-size: 12px; margin-top: 5px; color: #aaa;}
        .app-container {padding: 15px;}
        .database-item {padding: 10px; border-bottom: 1px solid #eee; cursor: pointer; transition: background 0.3s;}
        .database-item.active {background: #f0f0f0;}
        .word-item {padding: 10px; border-bottom: 1px solid #eee; display: flex; align-items: center;}
        .word-text { flex-grow: 1; font-weight: bold;}
        .word-actions button {margin-right: 5px; padding: 5px 10px; border-radius: 3px; border: none; cursor: pointer;}
        .search-btn {background: #0078d7; color: #fff;}
        .audio-btn {background: #4CAF50; color: #fff;}
        .empty-message {text-align: center; color: #666; padding: 20px;}
        .words-section {display: none;}
        .words-section.active {display: block;}
        h3 {color: #0078d7;}
    </style>
</head>
<body>
    <div class="main-header">
        <div class="main-title">Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±ÙŠØ¨ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø¹Ø±Ø¨ÙŠ</div>
        <div class="sub-title">Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØ¯</div>
        <div class="contact-info">Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… ÙˆØ§Ù„Ø§ØªØµØ§Ù„: xpacxx2@hotmail.com , WhatsApp: +01221347946</div>
    </div>

    <div class="app-container">
        <div>
            <h3>ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù…ÙˆØ³</h3>
            <div id="databasesList"></div>
        </div>

        <div class="words-section" id="wordsSection">
            <h3 id="wordsSectionTitle"></h3>
            <div id="savedWordsList"></div>
        </div>
    </div>

    <script>
        const autoUrls = [
            "https://raw.githubusercontent.com/muhammedhaffez116-2pac/Mydatabasetest/refs/heads/main/009.json",
            "https://raw.githubusercontent.com/muhammedhaffez116-2pac/Mydatabasetest/refs/heads/main/010.json",
            "https://raw.githubusercontent.com/muhammedhaffez116-2pac/Mydatabasetest/refs/heads/main/011.json"
        ];

        let databases = [];
        let currentDbIdx = null;

        function loadAllDatabases() {
            databases = [];
            autoUrls.forEach(url => {
                fetch(url)
                .then(res => res.json())
                .then(data => {
                    let urlParts = url.split('/');
                    let dbName = urlParts[urlParts.length - 1].replace('.json','');
                    let wordsArr = [];
                    if (Array.isArray(data)) {
                        wordsArr = data;
                    } else if (Array.isArray(data.words)) {
                        wordsArr = data.words;
                    }
                    databases.push({ name: dbName, words: wordsArr });
                })
                .catch(_=>{});
            });
            setTimeout(displayDatabases, 2000);
        }

        function displayDatabases() {
            const list = document.getElementById('databasesList');
            list.innerHTML = '';
            if (databases.length === 0) {
                list.innerHTML = '<div class="empty-message">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ù…ØªØ§Ø­Ø©</div>';
                return;
            }
            databases.forEach((db, idx) => {
                const div = document.createElement('div');
                div.className = 'database-item';
                div.textContent = db.name;
                div.onclick = () => showWords(idx);
                if (currentDbIdx === idx) div.classList.add('active');
                list.appendChild(div);
            });
        }

        function showWords(idx) {
            currentDbIdx = idx;
            displayDatabases();
            const db = databases[idx];
            document.getElementById('wordsSection').classList.add('active');
            document.getElementById('wordsSectionTitle').textContent = db.name;
            const savedWordsList = document.getElementById('savedWordsList');
            savedWordsList.innerHTML = '';
            if (!db.words || db.words.length === 0) {
                savedWordsList.innerHTML = '<div class="empty-message">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª</div>';
                return;
            }
            db.words.forEach(obj => {
                let w = obj.word ? obj.word : obj;
                const wordDiv = document.createElement('div');
                wordDiv.className = 'word-item';

                const wordSpan = document.createElement('span');
                wordSpan.className = 'word-text';
                wordSpan.textContent = w;

                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'word-actions';

                const audioBtn = document.createElement('button');
                audioBtn.textContent = 'ğŸ”Š';
                audioBtn.className = 'audio-btn';
                audioBtn.title = 'Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø©';
                audioBtn.onclick = () => speakWord(w);

                const searchBtn = document.createElement('button');
                searchBtn.textContent = 'Ø§Ø¨Ø­Ø«';
                searchBtn.className = 'search-btn';
                searchBtn.onclick = () => {
                    // â† Ù‡Ù†Ø§ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù…Ø¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙ„Ù…Ø©
                    window.location.href = 'word.html?term=' + encodeURIComponent(w);
                };

                actionsDiv.appendChild(audioBtn);
                actionsDiv.appendChild(searchBtn);
                wordDiv.appendChild(wordSpan);
                wordDiv.appendChild(actionsDiv);
                savedWordsList.appendChild(wordDiv);
            });
        }

        function speakWord(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                speechSynthesis.speak(utterance);
            } else {
                alert('Ù…ÙŠØ²Ø© Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø§Øª ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© ÙÙŠ Ù…ØªØµÙØ­Ùƒ');
            }
        }

        window.onload = loadAllDatabases;
    </script>
</body>
</html>