<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±ÙŠØ¨ - index</title>
  <style>
    body {font-family: Arial, sans-serif; margin:0; background:#fff; color:#111; direction:rtl;}
    .header{background:#111;color:#fff;padding:14px;text-align:center;}
    .header h1{margin:0;font-size:20px}
    .container{padding:12px}
    .db-item{padding:10px;border-bottom:1px solid #eee;cursor:pointer}
    .words{margin-top:12px}
    .word-row{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px solid #f0f0f0}
    .word-text{font-weight:700}
    .btn{padding:6px 10px;border-radius:4px;border:none;cursor:pointer}
    .search-btn{background:#0078d7;color:#fff}
    .audio-btn{background:#4CAF50;color:#fff;margin-left:6px}
    .empty{color:#777;padding:14px;text-align:center}
  </style>
</head>
<body>
  <div class="header">
    <h1>Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±ÙŠØ¨ â€” Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ â‡„ Ø¹Ø±Ø¨ÙŠ</h1>
  </div>

  <div class="container">
    <h3>Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù‚Ø§Ù…ÙˆØ³</h3>
    <div id="databasesList"></div>

    <div class="words" id="wordsSection" style="display:none">
      <h3 id="wordsTitle"></h3>
      <div id="wordsList"></div>
    </div>
  </div>

  <script>
    // Ø±ÙˆØ§Ø¨Ø· Ù…Ù„ÙØ§Øª JSON Ø¹Ù„Ù‰ GitHub (Ø¶Ø¹ Ø±ÙˆØ§Ø¨Ø·Ùƒ Ù‡Ù†Ø§)
    const autoUrls = [
      "https://raw.githubusercontent.com/muhammedhaffez116-2pac/Mydatabasetest/refs/heads/main/009.json",
      "https://raw.githubusercontent.com/muhammedhaffez116-2pac/Mydatabasetest/refs/heads/main/010.json",
      "https://raw.githubusercontent.com/muhammedhaffez116-2pac/Mydatabasetest/refs/heads/main/011.json"
    ];

    let databases = [];

    function loadAllDatabases(){
      databases = [];
      const promises = autoUrls.map(url =>
        fetch(url).then(r => r.json()).then(data=>{
          const name = url.split('/').pop().replace('.json','');
          const words = Array.isArray(data) ? data : (data.words || []);
          databases.push({name, words});
        }).catch(()=>{ /* ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ÙØ±Ø¯ÙŠØ© */ })
      );
      Promise.all(promises).then(displayDatabases);
    }

    function displayDatabases(){
      const list = document.getElementById('databasesList');
      list.innerHTML = '';
      if(databases.length === 0){
        list.innerHTML = '<div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ÙˆØ§Ø¹Ø¯ Ù…ØªØ§Ø­Ø©</div>';
        return;
      }
      databases.forEach((db, idx) => {
        const div = document.createElement('div');
        div.className = 'db-item';
        div.textContent = db.name;
        div.onclick = ()=> showWords(idx);
        list.appendChild(div);
      });
    }

    function showWords(idx){
      const db = databases[idx];
      document.getElementById('wordsSection').style.display = 'block';
      document.getElementById('wordsTitle').textContent = 'ØµÙØ­Ø©: ' + db.name;
      const wl = document.getElementById('wordsList');
      wl.innerHTML = '';
      if(!db.words || db.words.length === 0){
        wl.innerHTML = '<div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª</div>';
        return;
      }
      db.words.forEach(obj=>{
        const w = (obj && obj.word) ? obj.word : obj;
        const row = document.createElement('div');
        row.className = 'word-row';
        const span = document.createElement('span');
        span.className = 'word-text';
        span.textContent = w;
        const actions = document.createElement('div');

        // Ø²Ø± ÙØªØ­ ØµÙØ­Ø© Ø§Ù„ÙƒÙ„Ù…Ø© (ÙŠÙØªØ­ word.htmlØŸ)
        const openBtn = document.createElement('button');
        openBtn.className = 'btn search-btn';
        openBtn.textContent = 'ÙØªØ­';
        openBtn.onclick = ()=> {
          // Ø§ÙØªØ­ ØµÙØ­Ø© Ù…Ù†ÙØµÙ„Ø© Ù„ÙƒÙ„ ÙƒÙ„Ù…Ø© Ù…Ø¹ Ø¨Ø§Ø±Ø§Ù…ÙŠØªØ± term
          const target = 'word.html?term=' + encodeURIComponent(w);
          // Ø§ÙØªØ­ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù†Ø§ÙØ°Ø© (WebViewer Ø³ÙŠØ­Ù…Ù‘Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¯Ø§Ø®Ù„Ù‡)
          window.location.href = target;
        };

        // Ø²Ø± Ù†Ø·Ù‚
        const audioBtn = document.createElement('button');
        audioBtn.className = 'btn audio-btn';
        audioBtn.textContent = 'ğŸ”Š';
        audioBtn.onclick = ()=> {
          if('speechSynthesis' in window){
            const u = new SpeechSynthesisUtterance(w);
            u.lang = 'en-US';
            speechSynthesis.speak(u);
          } else alert('Ù†Ø·Ù‚ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…');
        };

        actions.appendChild(openBtn);
        actions.appendChild(audioBtn);
        row.appendChild(span);
        row.appendChild(actions);
        wl.appendChild(row);
      });
    }

    window.onload = loadAllDatabases;
  </script>
</body>
</html>