<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ø§Ù„Ù…ØªØ®ØµØµØ© - Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØ¯</title>
    <style>
        body {font-family: Arial, sans-serif; margin: 0; background: #fff;}
        .main-header {background: #111; color: #fff; text-align: center; padding: 15px;}
        .main-title { font-size: 24px; font-weight: bold; margin-bottom: 5px;}
        .languages-list { font-size: 14px; color: #ccc; margin-bottom: 5px;}
        .contact-info { font-size: 12px; margin-top: 5px; color: #aaa;}
        .app-container {padding: 15px;}
        .database-item {padding: 10px; border-bottom: 1px solid #eee; cursor: pointer; transition: background 0.3s;}
        .database-item:hover {background: #f0f0f0;}
        .database-item.disabled {color: #999; cursor: not-allowed;}
        .database-item.disabled:hover {background: #fff;}
        .empty-message {text-align: center; color: #666; padding: 20px;}
        .loading-message {text-align: center; color: #0078d7; padding: 20px;}
        .status-info {background: #f5f5f5; padding: 15px; margin: 15px 0; border-radius: 5px;}
        .refresh-btn {padding: 10px; background: #0078d7; color: #fff; border: none; border-radius: 3px; cursor: pointer; margin-bottom: 15px;}
        .progress-bar {width: 100%; height: 20px; background: #f0f0f0; border-radius: 10px; margin: 10px 0; overflow: hidden;}
        .progress-fill {height: 100%; background: #0078d7; transition: width 0.3s;}
        .search-box {padding: 10px; width: 100%; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;}
        h3 {color: #0078d7;}
    </style>
</head>
<body>
    <div class="main-header">
        <div class="main-title">Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ø§Ù„Ù…ØªØ®ØµØµØ©</div>
        <div class="languages-list">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ© - Ø§Ù„Ø±ÙˆØ³ÙŠØ© - Ø§Ù„Ø¨Ø±ØªØºØ§Ù„ÙŠØ© - Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠØ© - Ø§Ù„ÙØ±Ù†Ø³ÙŠØ© - Ø§Ù„Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ© - Ø§Ù„ØªØ±ÙƒÙŠØ©</div>
        <div class="contact-info">Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØ¯ - Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… ÙˆØ§Ù„Ø§ØªØµØ§Ù„: xpacxx2@hotmail.com , WhatsApp: +01221347946</div>
    </div>

    <div class="app-container">
        <button class="refresh-btn" onclick="loadAllDatabases()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³</button>
        <input type="text" class="search-box" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‚Ø§Ù…ÙˆØ³ Ø¨Ø§Ù„Ø±Ù‚Ù… Ø£Ùˆ Ø¨Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª..." onkeyup="filterDatabases()">
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
        
        <div id="progressText" class="loading-message">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³: 0/1100</div>
        
        <div>
            <h3>ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù…ÙˆØ³</h3>
            <div id="databasesList">
                <div class="loading-message">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
            </div>
        </div>
    </div>

    <script>
        // âœ… ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: ØªØºÙŠÙŠØ± Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª Ù…Ù† smart-dictionary-export Ø¥Ù„Ù‰ app
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…ØµÙÙˆÙØ© Ù…Ù† app-1 Ø¥Ù„Ù‰ app-1100
        const allDatabaseNumbers = Array.from({length: 1100}, (_, i) => 
            `app-${i + 1}`
        );

        let allDatabases = [];

        async function checkDatabaseExists(dbName) {
            const url = `${dbName}.json`;
            try {
                const response = await fetch(url, { method: 'HEAD' });
                return response.ok;
            } catch {
                return false;
            }
        }

        async function loadDatabaseData(dbName) {
            const url = `${dbName}.json`;
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error('ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
                
                const data = await response.json();
                const words = Array.isArray(data) ? data : data.words || [];
                
                return {
                    name: dbName,
                    words: words,
                    url: url,
                    success: true,
                    enabled: true,
                    wordCount: words.length
                };
            } catch (error) {
                return {
                    name: dbName,
                    words: [],
                    url: url,
                    success: false,
                    enabled: false,
                    error: error.message
                };
            }
        }

        async function loadAllDatabases() {
            const list = document.getElementById('databasesList');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            list.innerHTML = '<div class="loading-message">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ø§Ù„Ù…Ø­Ù„ÙŠØ©...</div>';
            allDatabases = [];
            
            try {
                let completed = 0;
                const total = allDatabaseNumbers.length;
                
                for (const dbName of allDatabaseNumbers) {
                    const exists = await checkDatabaseExists(dbName);
                    if (exists) {
                        const dbData = await loadDatabaseData(dbName);
                        allDatabases.push(dbData);
                    } else {
                        allDatabases.push({
                            name: dbName,
                            words: [],
                            success: false,
                            enabled: false,
                            error: 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯',
                            wordCount: 0
                        });
                    }
                    
                    completed++;
                    const progress = (completed / total) * 100;
                    progressFill.style.width = `${progress}%`;
                    progressText.textContent = `Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³: ${completed}/${total}`;
                    
                    if (completed % 10 === 0) {
                        displayDatabases(allDatabases);
                    }
                }
                
                displayDatabases(allDatabases);
                progressText.innerHTML = `<strong>ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ${total} Ù‚Ø§Ù…ÙˆØ³</strong>`;
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ Ø¹Ø§Ù…:', error);
                list.innerHTML = '<div class="empty-message">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>';
            }
        }

        function displayDatabases(databases) {
            const list = document.getElementById('databasesList');
            const successfulDatabases = databases.filter(db => db.success && db.wordCount > 0);
            const failedDatabases = databases.filter(db => !db.success);
            
            if (successfulDatabases.length === 0) {
                list.innerHTML = `
                    <div class="empty-message">
                        <strong>Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ù…ØªØ§Ø­Ø©</strong><br>
                        <small>ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„ÙØ§Øª JSON ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯</small><br>
                        <small>Ù…Ø«Ø§Ù„: app-1.json, app-2.json, Ø¥Ù„Ø®</small>
                    </div>
                `;
                return;
            }
            
            const statusDiv = document.createElement('div');
            statusDiv.className = 'status-info';
            statusDiv.innerHTML = `
                <strong>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ø§Ù„Ù…Ø­Ù„ÙŠØ©:</strong><br>
                âœ… Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ø§Ù„Ù…ØªØ§Ø­Ø©: ${successfulDatabases.length}<br>
                âŒ Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ ØºÙŠØ± Ø§Ù„Ù…ØªØ§Ø­Ø©: ${failedDatabases.length}<br>
                ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„Ù…Ø§Øª: ${successfulDatabases.reduce((sum, db) => sum + db.wordCount, 0).toLocaleString()} ÙƒÙ„Ù…Ø©<br>
                <small>ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯</small>
            `;
            list.innerHTML = '';
            list.appendChild(statusDiv);
            
            successfulDatabases.forEach((db) => {
                const div = document.createElement('div');
                div.className = 'database-item';
                div.setAttribute('data-name', db.name);
                div.setAttribute('data-words', db.wordCount);
                div.innerHTML = `
                    <div style="font-weight: bold;">${db.name}</div>
                    <div style="font-size: 12px; color: #666;">${db.wordCount.toLocaleString()} ÙƒÙ„Ù…Ø© - Ù…ØªØ§Ø­</div>
                `;
                div.onclick = () => {
                    window.location.href = `words.html?db=${db.name}`;
                };
                list.appendChild(div);
            });
        }

        function filterDatabases() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const allItems = document.querySelectorAll('.database-item');
            let visibleCount = 0;
            
            allItems.forEach(item => {
                const dbName = item.getAttribute('data-name');
                const wordCount = item.getAttribute('data-words');
                
                const matchesSearch = 
                    dbName.includes(searchTerm) || 
                    wordCount.includes(searchTerm) ||
                    (searchTerm === '' && item.classList.contains('database-item'));
                
                if (matchesSearch) {
                    item.style.display = 'flex';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (searchTerm) {
                const statusDiv = document.querySelector('.status-info');
                if (statusDiv) {
                    statusDiv.innerHTML = statusDiv.innerHTML.replace(
                        /âœ… Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ø§Ù„Ù…ØªØ§Ø­Ø©: \d+/,
                        `âœ… Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ø§Ù„Ù…ØªØ§Ø­Ø©: ${visibleCount} (Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«)`
                    );
                }
            }
        }

        window.onload = loadAllDatabases;
    </script>
</body>
</html>