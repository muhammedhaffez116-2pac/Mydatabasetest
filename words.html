<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ - Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØ¯</title>
    <style>
        body {font-family: Arial, sans-serif; margin: 0; background: #fff;}
        .main-header {background: #111; color: #fff; text-align: center; padding: 15px;}
        .main-title { font-size: 24px; font-weight: bold; margin-bottom: 5px;}
        .languages-list { font-size: 14px; color: #ccc; margin-bottom: 5px;}
        .contact-info { font-size: 12px; margin-top: 5px; color: #aaa;}
        .app-container {padding: 15px;}
        .word-item {padding: 10px; border-bottom: 1px solid #eee; display: flex; align-items: center; cursor: pointer;}
        .word-actions {width: 20%; text-align: left;}
        .word-actions button {padding: 5px 6px; border-radius: 3px; border: none; cursor: pointer; margin-left: 3px; font-size: 12px;}
        .audio-btn {background: #4CAF50; color: #fff;}
        .audio-ar-btn {background: #FF9800; color: #fff;}
        .audio-es-btn {background: #9C27B0; color: #fff;}
        .audio-ru-btn {background: #F44336; color: #fff;}
        .audio-pt-btn {background: #FF5722; color: #fff;}
        .audio-it-btn {background: #3F51B5; color: #fff;}
        .audio-fr-btn {background: #2196F3; color: #fff;}
        .audio-id-btn {background: #4CAF50; color: #fff;}
        .audio-tr-btn {background: #FFC107; color: #333;}
        .word-text { flex-grow: 1; font-weight: bold; width: 15%; margin-right: 5px; font-size: 14px;}
        .word-translation-container { flex-grow: 1; width: 12%; text-align: right; display: flex; align-items: center; justify-content: flex-end;}
        .word-translation { color: #666; font-size: 12px; margin-left: 5px; cursor: pointer;}
        .empty-message {text-align: center; color: #666; padding: 20px;}
        .back-btn {padding: 10px; background: #666; color: #fff; border: none; border-radius: 3px; cursor: pointer; margin-bottom: 15px;}
        .toggle-translation {padding: 6px 10px; background: #0078d7; color: #fff; border: none; border-radius: 3px; cursor: pointer; margin-bottom: 10px; margin-left: 5px; font-size: 12px;}
        .controls-container {display: flex; flex-wrap: wrap; margin-bottom: 15px; gap: 5px;}
        .loading {color: #999; font-style: italic;}
        .hidden {display: none;}
        h3 {color: #0078d7;}
    </style>
</head>
<body>
    <div class="main-header">
        <div class="main-title">Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ø§Ù„Ù…ØªØ®ØµØµØ©</div>
        <div class="languages-list">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ© - Ø§Ù„Ø±ÙˆØ³ÙŠØ© - Ø§Ù„Ø¨Ø±ØªØºØ§Ù„ÙŠØ© - Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠØ© - Ø§Ù„ÙØ±Ù†Ø³ÙŠØ© - Ø§Ù„Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ© - Ø§Ù„ØªØ±ÙƒÙŠØ©</div>
        <div class="contact-info">Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ± ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØ¯ - Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… ÙˆØ§Ù„Ø§ØªØµØ§Ù„: xpacxx2@hotmail.com , WhatsApp: +01221347946</div>
    </div>

    <div class="app-container">
        <button class="back-btn" onclick="window.history.back()">â—€ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù…ÙˆØ³</button>
        <div class="controls-container">
            <button class="toggle-translation" onclick="toggleTranslation('ar')">Ø¹Ø±Ø¨ÙŠ</button>
            <button class="toggle-translation" onclick="toggleTranslation('es')">Ø¥Ø³Ø¨Ø§Ù†ÙŠ</button>
            <button class="toggle-translation" onclick="toggleTranslation('ru')">Ø±ÙˆØ³ÙŠ</button>
            <button class="toggle-translation" onclick="toggleTranslation('pt')">Ø¨Ø±ØªØºØ§Ù„ÙŠ</button>
            <button class="toggle-translation" onclick="toggleTranslation('it')">Ø¥ÙŠØ·Ø§Ù„ÙŠ</button>
            <button class="toggle-translation" onclick="toggleTranslation('fr')">ÙØ±Ù†Ø³ÙŠ</button>
            <button class="toggle-translation" onclick="toggleTranslation('id')">Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠ</button>
            <button class="toggle-translation" onclick="toggleTranslation('tr')">ØªØ±ÙƒÙŠ</button>
        </div>
        <h3 id="pageTitle">ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù‚Ø§Ù…ÙˆØ³</h3>
        <div id="wordsList"></div>
    </div>

    <script>
        const languageStates = {
            'ar': false, 'es': false, 'ru': false, 'pt': false,
            'it': false, 'fr': false, 'id': false, 'tr': false
        };

        function getQueryParam(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name);
        }

        function toggleTranslation(lang) {
            languageStates[lang] = !languageStates[lang];
            document.querySelectorAll(`.word-${lang}-translation-container`).forEach(container => {
                container.classList.toggle('hidden', !languageStates[lang]);
            });
        }

        async function translateWord(word, targetLang) {
            try {
                const response = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${targetLang}&dt=t&q=${encodeURIComponent(word)}`);
                const data = await response.json();
                return data[0][0][0] || 'ØªØ±Ø¬Ù…Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø©';
            } catch {
                return 'ØªØ±Ø¬Ù…Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø©';
            }
        }

        async function loadWords() {
            const dbName = getQueryParam('db');
            if (!dbName) {
                document.getElementById('wordsList').innerHTML = '<div class="empty-message">Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ ØµÙØ­Ø© Ù‚Ø§Ù…ÙˆØ³</div>';
                return;
            }

            // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø© Ù„ÙŠØ¹ÙƒØ³ Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ù…ÙˆØ³
            document.getElementById('pageTitle').textContent = `ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ - ${dbName}`;

            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ø­Ù„ÙŠ - Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯
            const url = `${dbName}.json`;
            
            try {
                const response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error(`ØµÙØ­Ø© Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©: ${dbName}`);
                }
                
                const data = await response.json();
                const words = Array.isArray(data) ? data : data.words || [];
                const list = document.getElementById('wordsList');
                list.innerHTML = '';

                if (words.length === 0) {
                    list.innerHTML = '<div class="empty-message">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø§Ù…ÙˆØ³</div>';
                    return;
                }

                words.forEach(obj => {
                    const englishWord = obj.word || obj;
                    const div = document.createElement('div');
                    div.className = 'word-item';

                    const act = document.createElement('div');
                    act.className = 'word-actions';

                    const audioBtn = document.createElement('button');
                    audioBtn.textContent = 'ğŸ”Š';
                    audioBtn.className = 'audio-btn';
                    audioBtn.onclick = e => { e.stopPropagation(); speakWord(englishWord, 'en-US'); };
                    act.appendChild(audioBtn);
                    div.appendChild(act);

                    const wordSpan = document.createElement('span');
                    wordSpan.className = 'word-text';
                    wordSpan.textContent = englishWord;
                    div.appendChild(wordSpan);

                    // ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
                    div.onclick = () => {
                        window.location.href = `word.html?term=${encodeURIComponent(englishWord)}`;
                    };

                    const langs = [
                        {code:'ar',name:'Ø¹Ø±Ø¨ÙŠ',color:'audio-ar-btn',langCode:'ar-SA'},
                        {code:'es',name:'Ø¥Ø³Ø¨Ø§Ù†ÙŠ',color:'audio-es-btn',langCode:'es-ES'},
                        {code:'ru',name:'Ø±ÙˆØ³ÙŠ',color:'audio-ru-btn',langCode:'ru-RU'},
                        {code:'pt',name:'Ø¨Ø±ØªØºØ§Ù„ÙŠ',color:'audio-pt-btn',langCode:'pt-BR'},
                        {code:'it',name:'Ø¥ÙŠØ·Ø§Ù„ÙŠ',color:'audio-it-btn',langCode:'it-IT'},
                        {code:'fr',name:'ÙØ±Ù†Ø³ÙŠ',color:'audio-fr-btn',langCode:'fr-FR'},
                        {code:'id',name:'Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠ',color:'audio-id-btn',langCode:'id-ID'},
                        {code:'tr',name:'ØªØ±ÙƒÙŠ',color:'audio-tr-btn',langCode:'tr-TR'}
                    ];

                    langs.forEach(lang => {
                        const cont = document.createElement('div');
                        cont.className = `word-${lang.code}-translation-container hidden`;

                        const btn = document.createElement('button');
                        btn.textContent = 'ğŸ”Š';
                        btn.className = lang.color;

                        const span = document.createElement('span');
                        span.className = `word-${lang.code}-translation loading`;
                        span.textContent = '...';
                        span.style.cursor = 'pointer';

                        cont.appendChild(btn);
                        cont.appendChild(span);
                        div.appendChild(cont);

                        translateWord(englishWord, lang.code).then(translation => {
                            span.textContent = translation;
                            span.classList.remove('loading');

                            // Ù†Ø·Ù‚ Ø§Ù„ØªØ±Ø¬Ù…Ø©
                            btn.onclick = e => { e.stopPropagation(); speakWord(translation, lang.langCode); };

                            // ÙØªØ­ translate_page.html Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø¬Ù…Ø©
                            span.onclick = e => {
                                e.stopPropagation();
                                window.location.href = `translate_page.html?word=${encodeURIComponent(translation)}`;
                            };
                        });
                    });

                    list.appendChild(div);
                });

            } catch (error) {
                console.error('Error loading database:', error);
                document.getElementById('wordsList').innerHTML = 
                    `<div class="empty-message">ØµÙØ­Ø© Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©: ${dbName}</div>`;
            }
        }

        function speakWord(word, lang) {
            const utter = new SpeechSynthesisUtterance(word);
            utter.lang = lang;
            speechSynthesis.speak(utter);
        }

        window.onload = loadWords;
    </script>
</body>
</html>